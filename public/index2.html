<!DOCTYPE html>
<html lang="en" manifest="cache-manifest.manifest">
	<head>
		<title>Dominion</title>

		<meta charset="utf-8">
		<meta name="viewport" content="width=devicewidth; initial-scale=1.0; maximum-scale=1; user-scalable=0;">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="default">

		<!-- CSS Files -->
		<link href="css/style.css" rel="stylesheet" type="text/css">

		<!-- Third Party Library Files -->
		<script src="javascript/lib/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/lib/json2.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/lib/underscore.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/lib/backbone.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/lib/backbone.localstorage.js" type="text/javascript" charset="utf-8"></script>

		<!-- Data Files -->
		<script src="javascript/data.js" type="text/javascript" charset="utf-8"></script>

		<!-- Classes/Libraries -->
		<script src="javascript/models/card.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/models/library.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/models/config.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/views/base.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/views/options.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/views/deck.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/views/sets.js" type="text/javascript" charset="utf-8"></script>
		<script src="javascript/controllers/dominion.js" type="text/javascript" charset="utf-8"></script>

		<!-- Bootstrap file to startup the app -->
		<script src="javascript/bootstrap.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<div id="content">
		</div>

		<script id="template-deck" type="text/x-underscore-template">
			<nav>
			<a href="#deck/new" class="button-left newSet">New</a>
			<a href="#sets" class="button">Sets</a>
			<a href="#options" class="button-right">Options</a>
			</nav>
			<ul>
				<% _(set).each(function(card) { %>
					<li>
					<span class="cardSet <%= card.set %>">[<%= card.setAbbrev %>]</span>
					<span class="cardName"><%= card.name %></span>
					<span class="cardType">[<%
						if( card.type.action ) {
							print('<span class="type_action">A</span>');
						}
						if( card.type.treasure ) {
							print('<span class="type_treasure">T</span>');
						}
						if( card.type.victory ) {
							print('<span class="type_victory">V</span>');
						}

						if( card.type.attack ) {
							print('-<span class="type_attack">A</span>');
						}
						else if( card.type.defense ) {
							print('-<span class="type_defense">R</span>');
						}

						if( card.type.duration ) {
							print('-<span class="type_duration">D</span>');
						}
						%>]</span>
					<span class="cardCost">[<%= card.costStr %>]</span>
					</li>
					<% }); %>
			</ul>
		</script>
		<script id="template-sets" type="text/x-underscore-template">
			<nav>
			<a href="#deck" class="button-left newSet">&lt; Back</a>
			<a href="#options" class="button-right">Options</a>
			</nav>
			<div>
				Set Listing
			</div>
		</script>
		<script id="template-options" type="text/x-underscore-template">
			<nav>
			<a href="<%= backTarget %>" class="button-left">&lt Back</a>
			</nav>
			<fieldset><legend>Included Cards</legend>
				<fieldset><legend>Sets</legend>
					<% _(options.sets).each(function(on,set) { %>
						<div>
							<label for="set_<%=set%>"><%=set%></label>
							<input type="checkbox" id="set_<%=set%>" name="sets" 
							value="<%=set%>" <%=(on?'checked':'')%>>
						</div>
						<% }); %>
				</fieldset>
				<fieldset><legend>Promos</legend>
					<% _(options.promos).each(function(include,card) { %>
						<div>
							<label for="card_<%=card%>"><%=card%></label>
							<input type="checkbox" id="card_<%=card%>" name="promos" 
							value="<%=card%>" <%=(include?'checked':'')%>>
						</div>
						<% }); %>
				</fieldset>
			</fieldset>

			<fieldset>Set Rules<fieldset>
					<div>
						<label>No. Potion Cards</label>
						<input type="number" min="0" max="10" size="3" maxlength="2"
						id="alchemy_min" name="alchemy_min" value="<%=options.alchemy_min%>"
						<%=options.sets.Alchemy?'':'disabled'%>>&ndash;
						<input type="number" min="0" max="10" size="3" maxlength="2"
						id="alchemy_max" name="alchemy_max" value="<%=options.alchemy_max%>"
						<%=options.sets.Alchemy?'':'disabled'%>>
					</div>
				</fieldset>
				<fieldset>Card Rules</fieldset>
				<div>
					<label for="blackmarket_size">Black Market Deck Size</label>
					<input type="number" min="10" max="<%=constants.blackmarket_max%>"
					size="3" maxlength="3" id="blackmarket_size" name="blackmarket_size" 
					value="<%=options.blackmarket_size%>" 
					<%=(options.promos['Black Market']?'':'disabled')%>>
				</div>
				<div>
					<label for="prosperity_random_basics">Random Colony/Platinum</label>
					<input type="checkbox" id="prosperity_random_basics"
					name="prosperity_random_basics" value="true"
					<%=options.prosperity_random_basics?'checked':''%>>
				</div>
			</fieldset>
			<fieldset><legend>Card Selection</legend>
				<div>
					<label for="require_defense">Require Reactions</label>
					<input type="checkbox" id="require_defense" name="require_defense"
					value="true" <%=options.require_defense?'checked':''%>>
				</div>
			</fieldset>
			<fieldset><legend>Deck Display</legend>
				<% _(options.display).each(function(on, key) { %>
					<div>
						<label for="display_<%=key%>">Show <%=key.charAt(0).toUpperCase()+key.slice(1)%></label>
						<input type="checkbox" id="display_<%=key%>" name="display"
						value="<%=key%>" <%=on?'checked':''%>>
					</div>
					<% }); %>
				<div>
					<label for="sort">Sort By</label>
					<select id="sort" name="sort">
						<% _(constants.sort_fields).each(function(sort) { %>
							<option value="<%=sort%>" <%=(sort===options.sort)?'selected':''%>
							><%=sort.charAt(0).toUpperCase()+sort.slice(1)%></option>
							<% }); %>
					</select>
				</div>
			</fieldset>
		</script>
	</body>
</html>
